{"version":3,"file":"js/170.fdcbac2a.js","mappings":"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","sources":["webpack://node-demo/./src/store/canvas.js","webpack://node-demo/./src/components/nowColor.vue","webpack://node-demo/./src/components/selectColor.vue","webpack://node-demo/./src/components/selectColor.vue?859f","webpack://node-demo/./src/components/hoverSelect.vue","webpack://node-demo/./src/components/colorPixel.vue","webpack://node-demo/./src/components/colorPixel.vue?3705","webpack://node-demo/./src/components/pixelInfo.vue","webpack://node-demo/./src/components/swapAlert.vue","webpack://node-demo/./src/components/swapAlert.vue?6f3c","webpack://node-demo/./src/views/NFT/components/colorBox.vue","webpack://node-demo/./src/views/NFT/components/colorBox.vue?fd15","webpack://node-demo/./src/views/NFT/components/changeColor.vue","webpack://node-demo/./src/views/NFT/components/changeColor.vue?3126","webpack://node-demo/./src/views/NFT/details.vue","webpack://node-demo/./src/views/NFT/details.vue?56f7"],"sourcesContent":["import { defineStore } from 'pinia';\nexport const canvasStore = defineStore('canvas', {\n  state() {\n    return {\n      selectPixelList: [],\n      activeColorId: 80,\n      selectColorList: [],\n      selectColorId: 0,\n      page: 0,\n    };\n  },\n  actions: {\n    changePage(page) {\n      this.page = page;\n      this.selectPixelList = [];\n      this.selectColorList = [];\n    },\n    selectColorItem(index) {\n      if (this.selectColorList[index] == this.activeColorId) {\n        this.selectColorList.splice(index, 1);\n      } else {\n        this.selectColorList = [\n          ...this.selectColorList.slice(0, index),\n          this.activeColorId,\n          ...this.selectColorList.slice(index + 1),\n        ];\n      }\n    },\n    clearColor() {\n      this.selectColorList = [];\n    },\n    selectColor(colorId) {\n      if (this.activeColorId == colorId) {\n        return;\n      }\n\n      // if (colorId == 0 ) {\n      //   return;\n      // }\n      this.selectColorId = colorId;\n      this.activeColorId = colorId;\n      // if (type != 'nft') {\n      //   this.selectColorList.push(colorId);\n      // }\n    },\n    pixelExists(params) {\n      const index = this.selectPixelList.findIndex(\n        (pixel) => pixel.newPixel.boxId === params.newPixel.boxId\n      );\n      if (index < 0) {\n        this.addSelectPixel(params);\n        return true;\n      }\n      if (this.selectPixelList[index].colorId == this.activeColorId) {\n        this.removeSelectPixel(params);\n        return false;\n      } else {\n        this.selectPixel(params);\n        return true;\n      }\n    },\n    addSelectPixel(params) {\n      this.selectPixelList.push(params);\n      const arr = this.selectPixelList.filter(\n        (pixel) => pixel.colorId === params.colorId\n      );\n\n      if (arr.length == 1) {\n        this.selectColorList.push(params.colorId);\n      }\n    },\n    removeSelectPixel(params) {\n      const index = this.selectPixelList.findIndex(\n        (pixel) => pixel.newPixel.boxId === params.newPixel.boxId\n      );\n\n      if (index >= 0) {\n        this.selectPixelList = [\n          ...this.selectPixelList.slice(0, index),\n          ...this.selectPixelList.slice(index + 1),\n        ];\n      }\n      const arr = this.selectPixelList.filter(\n        (pixel) => pixel.colorId === params.colorId\n      );\n      if (arr.length == 0) {\n        const colorIndex = this.selectColorList.findIndex(\n          (color) => color == params.colorId\n        );\n        this.selectColorList = this.selectColorList.splice(colorIndex, 1);\n      }\n    },\n    selectPixel(params) {\n      const index = this.selectPixelList.findIndex(\n        (pixel) => pixel.newPixel.boxId === params.newPixel.boxId\n      );\n      this.selectPixelList[index].colorId = this.activeColorId;\n      const arr = this.selectPixelList.filter(\n        (pixel) => pixel.colorId === params.colorId\n      );\n      if (arr.length == 0) {\n        const colorIndex = this.selectColorList.findIndex(\n          (color) => color == params.colorId\n        );\n        this.selectColorList = this.selectColorList.splice(colorIndex, 1);\n      }\n    },\n  },\n});\n","import script from \"./nowColor.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./nowColor.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./nowColor.vue?vue&type=style&index=0&id=7188ae0c&lang=scss&scoped=true\"\n\nimport exportComponent from \"/Users/zhuweiyun/Desktop/zwy/vue3-pc-天空之城/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-7188ae0c\"]])\n\nexport default __exports__","<script setup>\nimport { ref, reactive, toRefs, computed, watchEffect } from 'vue';\nconst props = defineProps({\n  colorSelect: Object,\n  pixelSize: Number,\n});\nconst { colorSelect, pixelSize } = toRefs(props);\nconst left = computed(() => colorSelect.value.x);\nconst top = computed(() => colorSelect.value.y);\n</script>\n<template>\n  <div\n    class=\"PixelHoverHighlight\"\n    :style=\"{\n      transform: `translate(${left}px, ${top}px`,\n      width: pixelSize + 'px',\n      height: pixelSize + 'px',\n    }\"\n  ></div>\n</template>\n\n<style lang=\"scss\" scoped>\n.PixelHoverHighlight {\n  position: absolute;\n  background: rgba(0, 0, 0, 0.3);\n  z-index: 10;\n  box-shadow: inset 0 0 0 1px #fff;\n  pointer-events: none;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  color: #fff;\n  font-weight: bold;\n  font-size: 6px;\n  top: 0;\n  left: 0;\n  border: 1px solid #fff;\n}\n.close-icon {\n  margin: auto auto;\n}\n</style>\n","import script from \"./selectColor.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./selectColor.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./selectColor.vue?vue&type=style&index=0&id=6b9d08ff&lang=scss&scoped=true\"\n\nimport exportComponent from \"/Users/zhuweiyun/Desktop/zwy/vue3-pc-天空之城/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-6b9d08ff\"]])\n\nexport default __exports__","import script from \"./hoverSelect.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./hoverSelect.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./hoverSelect.vue?vue&type=style&index=0&id=33acfa8d&lang=scss&scoped=true\"\n\nimport exportComponent from \"/Users/zhuweiyun/Desktop/zwy/vue3-pc-天空之城/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-33acfa8d\"]])\n\nexport default __exports__","<script setup>\nimport { ref, reactive, computed, onBeforeMount, toRefs } from 'vue';\nimport { hexPalette } from '@/utils/color.js';\nimport nowColor from './nowColor.vue';\nimport selectColor from './selectColor.vue';\nimport hoverSelect from './hoverSelect.vue';\nimport { canvasStore } from '@/store/canvas';\nconst canvasBg = require('@assets/commonImg/bg.png');\nconst store = canvasStore();\nconst props = defineProps({\n  type: String,\n  size: Number,\n  hide: Boolean,\n});\nconst { type, size } = toRefs(props);\nconst data = reactive({\n  colorKonva: {\n    width: size * 16,\n    height: size * 16,\n  },\n  colorHover: {\n    x: 0,\n    y: 0,\n  },\n  colorClick: {\n    x: 0,\n    y: 0,\n  },\n});\n\nconst activeColorId = computed(() => store.activeColorId);\nconst colorArr = [];\nconst createBox = () => {\n  const len = Math.sqrt(hexPalette.length);\n  for (let a = 0; a < hexPalette.length; a++) {\n    const x = a % len;\n    const y = Math.floor(a / len);\n    colorArr[y * len + x] = Box(y * len + x, x * size.value, y * size.value, a);\n  }\n};\nconst Box = (id, x, y, color) => {\n  return {\n    id,\n    x,\n    y,\n    color,\n  };\n};\nconst boxEvent = (event) => {\n  if (event.target.attrs) {\n    data.colorClick = event.target.attrs;\n    if (data.colorClick.colorId >= 0) {\n      console.log(data.colorClick.colorId, hexPalette[data.colorClick.colorId]);\n      store.selectColor(data.colorClick.colorId, type.value);\n    }\n  }\n};\nconst mousemove = (event) => {\n  if (event.target.attrs) {\n    data.colorHover = event.target.attrs;\n  }\n};\nonBeforeMount(() => {\n  createBox();\n});\n</script>\n<template>\n  <div class=\"color-box hand\">\n    <v-stage\n      :style=\"{\n        background: `url(${canvasBg})`,\n        backgroundSize: size,\n      }\"\n      @click=\"boxEvent\"\n      @mousemove=\"mousemove\"\n      :config=\"{\n        width: size * 16,\n        height: size * 16,\n      }\"\n    >\n      <v-layer>\n        <v-rect\n          v-for=\"(item, key) in colorArr\"\n          :key=\"key\"\n          :x=\"item.x\"\n          :y=\"item.y\"\n          :width=\"size\"\n          :height=\"size\"\n          :colorId=\"item.color\"\n          :fill=\"hexPalette[item.color]\"\n        ></v-rect>\n      </v-layer>\n    </v-stage>\n    <select-color\n      v-show=\"data.colorClick\"\n      :colorSelect=\"data.colorClick\"\n      :pixelSize=\"size\"\n    ></select-color>\n    <select-color\n      v-show=\"data.colorHover\"\n      :colorSelect=\"data.colorHover\"\n      :pixelSize=\"size\"\n    ></select-color>\n  </div>\n  <now-color :colorId=\"activeColorId\" v-if=\"!hide\"></now-color>\n</template>\n\n<style lang=\"scss\" scoped>\n.color-box {\n  display: inline-block;\n  position: relative;\n}\n</style>\n","import script from \"./colorPixel.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./colorPixel.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./colorPixel.vue?vue&type=style&index=0&id=6d21355e&lang=scss&scoped=true\"\n\nimport exportComponent from \"/Users/zhuweiyun/Desktop/zwy/vue3-pc-天空之城/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-6d21355e\"]])\n\nexport default __exports__","import script from \"./pixelInfo.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./pixelInfo.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./pixelInfo.vue?vue&type=style&index=0&id=0735de9e&lang=scss&scoped=true\"\n\nimport exportComponent from \"/Users/zhuweiyun/Desktop/zwy/vue3-pc-天空之城/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-0735de9e\"]])\n\nexport default __exports__","<script setup>\nimport { ref, reactive, toRefs } from 'vue';\nimport popupTitle from '@/components/popupTitle.vue';\nimport { commonStore } from '@/store/common';\nimport useClipboard from 'vue-clipboard3';\nimport loadingIcon from './loadingIcon.vue';\n\nconst props = defineProps({\n  finish: Boolean,\n  success: Boolean,\n  hash: String,\n  type: String,\n  text: String,\n  title: String,\n  btn: String,\n  empowerText: String,\n  empower: Boolean,\n  check: Boolean,\n});\n\nconst { hash } = toRefs(props);\nconst emit = defineEmits(['closeFn', 'empowerFn', 'submit']);\nconst common_store = commonStore();\nconst { toClipboard } = useClipboard();\n</script>\n<template>\n  <div class=\"bind allFlex column\">\n    <span\n      class=\"success-btn Wcolor font-Two\"\n      :class=\"[success ? 'btnBg' : 'redBg']\"\n      v-show=\"finish\"\n      >{{ success ? $t('success') : $t('fail') }}</span\n    >\n    <loading-icon class=\"loading\" v-show=\"!finish && check\"></loading-icon>\n    <p class=\"popup-title Wcolor font-Eight font500 center\">\n      {{ $t(title) }}\n    </p>\n    <div class=\"bind_ipt center Wcolor\" v-if=\"!finish\">\n      <slot></slot>\n    </div>\n\n    <div\n      class=\"bind_ipt bgPadding center\"\n      :class=\"[success ? 'mainColor font-Ty' : 'redColor hashFont font-Four']\"\n      v-if=\"finish\"\n    >\n      {{ success ? $t(text) : hash }}\n    </div>\n    <div class=\"bgPadding\">\n      <n-button\n        type=\"tertiary\"\n        v-if=\"!empower\"\n        :disabled=\"check\"\n        class=\"font-Three btn\"\n        block\n        @click=\"$emit('empowerFn')\"\n        >{{ $t(empowerText) }}</n-button\n      >\n      <n-button\n        class=\"btn font-Three\"\n        type=\"primary\"\n        :disabled=\"!empower || check\"\n        @click=\"$emit('submit')\"\n        v-show=\"!finish\"\n        block\n        >{{ $t(btn) }}</n-button\n      >\n      <n-button\n        class=\"btn font-Three\"\n        :type=\"success ? 'primary' : 'error'\"\n        v-show=\"finish\"\n        block\n        @click=\"$emit('closeFn')\"\n        >{{ $t('SwapAlert.close') }}</n-button\n      >\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n.popup-title {\n  position: relative;\n  height: 50px;\n  line-height: 50px;\n}\n.bind {\n  width: 378px;\n  height: 250px;\n  background: url('../assets/commonImg/alert-bg1.png') no-repeat;\n  background-size: 100% 100%;\n  position: relative;\n  padding: 4px 10px 30px 10px;\n  &_ipt {\n    text-overflow: ellipsis;\n    word-break: break-all;\n    padding: 15px;\n    line-height: 30px;\n    max-height: 120px;\n    overflow-y: scroll;\n  }\n}\n.loading {\n  position: absolute;\n  top: 15px;\n  right: 15px;\n}\n.success-btn {\n  padding: 2px 6px;\n  border-radius: 4px;\n  transform: scale(0.8);\n  position: absolute;\n  top: 15px;\n  right: 10px;\n}\n.btn {\n  text-align: center;\n  margin-top: 10px;\n}\n</style>\n","import script from \"./swapAlert.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./swapAlert.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./swapAlert.vue?vue&type=style&index=0&id=65675c50&lang=scss&scoped=true\"\n\nimport exportComponent from \"/Users/zhuweiyun/Desktop/zwy/vue3-pc-天空之城/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-65675c50\"]])\n\nexport default __exports__","<script setup>\nimport { ref, reactive, computed } from 'vue';\nimport { hexPalette } from '@/utils/color.js';\nimport { canvasStore } from '@/store/canvas';\nconst canvas_store = canvasStore();\nconst colorId = computed(() => canvas_store.activeColorId);\n</script>\n<template>\n  <ul class=\"now-color\">\n    <li class=\"Wcolor font-Two\">\n      {{ $t('color') }}\n    </li>\n    <li\n      :style=\"{ color: colorId == 0 ? '#fff' : hexPalette[colorId] }\"\n      class=\"font-Four font500\"\n    >\n      {{ colorId == 0 ? '#0' : hexPalette[colorId] }}\n    </li>\n    <li\n      class=\"colorBg\"\n      :style=\"{\n        background: colorId == 0 ? 'transparent' : hexPalette[colorId],\n      }\"\n    ></li>\n  </ul>\n</template>\n\n<style lang=\"scss\" scoped>\n.now-color {\n  flex: 1;\n  margin-left: 15px;\n  li {\n    margin-bottom: 15px;\n  }\n}\n.colorBg {\n  height: 40px;\n  width: 90%;\n}\n</style>\n","import script from \"./colorBox.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./colorBox.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./colorBox.vue?vue&type=style&index=0&id=f7fe2c58&lang=scss&scoped=true\"\n\nimport exportComponent from \"/Users/zhuweiyun/Desktop/zwy/vue3-pc-天空之城/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-f7fe2c58\"]])\n\nexport default __exports__","<script setup>\nimport { ref, reactive } from 'vue';\nimport colorPixel from '@/components/colorPixel.vue';\nimport colorBox from './colorBox.vue';\nconst data = reactive({\n  show: false,\n});\ndefineEmits(['setColor']);\n</script>\n<template>\n  <div class=\"change-color\" :style=\"{ height: data.show ? '400px' : '30px' }\">\n    <div\n      class=\"flex_between change-color_title hand\"\n      @click=\"data.show = !data.show\"\n    >\n      <span class=\"font-Six Wcolor\">{{ $t('NFT.changeColor') }}</span>\n      <img\n        src=\"@assets/nftImg/right_icon.png\"\n        alt=\"\"\n        class=\"right_icon hand\"\n        :class=\"[data.show && 'check_icon']\"\n      />\n    </div>\n    <div class=\"color-box\">\n      <div class=\"allFlex\">\n        <color-pixel type=\"nft\" :size=\"17\" :hide=\"true\"></color-pixel>\n        <color-box></color-box>\n      </div>\n\n      <n-button\n        type=\"primary\"\n        plain\n        class=\"btn\"\n        block\n        @click=\"$emit('setColor')\"\n        >{{ $t('NFT.modity') }}</n-button\n      >\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n.change-color {\n  padding: 15px 20px;\n  border: 1px solid $white;\n  border-radius: 8px;\n  overflow: hidden;\n  transition: all ease-in 0.4s;\n  &_title {\n    height: 30px;\n  }\n}\n.right_icon {\n  width: 9px;\n  height: 15px;\n  transition: all ease-in 0.2s;\n}\n.check_icon {\n  transform: rotate(90deg);\n}\n.color-box {\n  margin-top: 20px;\n  .van-button {\n    margin-top: 20px;\n  }\n}\n.btn {\n  width: 75%;\n  margin: 30px auto 0;\n}\n</style>\n","import script from \"./changeColor.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./changeColor.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./changeColor.vue?vue&type=style&index=0&id=176c7744&lang=scss&scoped=true\"\n\nimport exportComponent from \"/Users/zhuweiyun/Desktop/zwy/vue3-pc-天空之城/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-176c7744\"]])\n\nexport default __exports__","<script setup>\nimport { ref, reactive, onBeforeMount, computed, watchEffect } from 'vue';\nimport { useRoute } from 'vue-router';\nimport pixelInfo from '@/components/pixelInfo.vue';\nimport changeColor from './components/changeColor.vue';\nimport swapAlert from '@/components/swapAlert.vue';\nimport { commonStore } from '@/store/common';\nimport { canvasStore } from '@/store/canvas';\nimport { useRouter } from 'vue-router';\nimport { getXY, getUrl } from '@/utils/index.js';\nimport { useI18n } from 'vue-i18n';\nimport { NModal } from 'naive-ui';\nimport countDown from '@/components/countDown.vue';\nconst common_store = commonStore();\nconst canvas_store = canvasStore();\nconst router = useRouter();\nconst route = useRoute();\nconst { t } = useI18n();\nconst data = reactive({\n  x: 0,\n  y: 0,\n  info: route.query,\n  alertShow: false,\n  finish: false,\n  success: false,\n  hash: '',\n  type: 'modity',\n  times: '',\n  check: false,\n  empower: false,\n  empowerText: 'EmpowerAlert.btn2',\n});\nlet colorId = ref(0);\nconst activeColorId = computed(() => canvas_store.activeColorId);\nconst getPixelColor = async () => {\n  const res = await common_store.allMethods.getPixel(data.info.tokenId).call();\n  colorId.value = res.color;\n};\nconst inTime = ref(false);\nconst price = computed(() => common_store.priceArr[data.times]);\nconst setColor = async () => {\n  if (activeColorId.value == 0) {\n    window.$message.warning(t('Home.alert1'));\n    return;\n  }\n  data.type = 'modity';\n  data.alertShow = true;\n  data.finish = false;\n  data.success = false;\n  data.empower = true;\n};\nonBeforeMount(() => {\n  getTimes(data.info.tokenid);\n  getEmpower();\n  data.x = getXY(data.info.tokenid).x;\n  data.y = getXY(data.info.tokenid).y;\n});\nconst getEmpower = async () => {\n  if (+data.times >= 9) {\n    return;\n  }\n  const res = await common_store.allMethods\n    .getApproved(data.info.tokenid)\n    .call();\n  data.empower = res == common_store.market_address;\n};\nconst toSell = async () => {\n  if (+data.times >= 9) {\n    return;\n  }\n  data.type = 'sell';\n  data.alertShow = true;\n  data.finish = false;\n  data.success = false;\n  try {\n    const res = await common_store.allMethods\n      .getApproved(data.info.tokenid)\n      .call();\n    data.empower = res == common_store.market_address;\n    data.type = 'sell';\n    data.alertShow = true;\n    data.finish = false;\n    data.success = false;\n    // if (res == common_store.market_address) {\n    //   sell();\n    // } else {\n    //授权弹框\n    // const res = await common_store.allMethods\n    //   .approve(common_store.market_address, data.info.tokenid)\n    //   .send({ from: common_store.address });\n    //   common_store.setEmpowerType(2, data.info.tokenid);\n    //   common_store.showEmpower(true);\n    // }\n  } catch (error) {\n    data.check = false;\n    window.$message.error(error);\n  }\n};\nconst getTimes = async (tokenId) => {\n  data.times = await common_store.marketMethods.nftTradeCount(tokenId).call();\n};\nconst sell = async () => {\n  if (data.check) {\n    return;\n  }\n  data.check = true;\n  try {\n    const sellRes = await common_store.marketMethods\n      .sell(data.info.tokenid)\n      .send({ from: common_store.address });\n    data.finish = true;\n    data.success = true;\n    data.hash = sellRes.transactionHash;\n    common_store.addHash(data.hash, 1);\n    data.check = false;\n  } catch (error) {\n    data.finish = true;\n    data.success = false;\n    data.check = false;\n    data.hash = error.message;\n  }\n};\nconst closeFn = () => {\n  data.alertShow = false;\n  if (data.success && data.type == 'sell') {\n    setTimeout(() => {\n      router.go(-1);\n    }, 1000);\n  }\n};\nconst empowerFn = async () => {\n  if (data.check) {\n    return;\n  }\n  data.check = true;\n  data.empowerText = 'EmpowerAlert.btn1';\n  try {\n    const res = await common_store.allMethods\n      .approve(common_store.market_address, data.info.tokenid)\n      .send({ from: common_store.address });\n    data.check = false;\n    data.empower = true;\n    data.empowerText = 'EmpowerAlert.btn2';\n  } catch (error) {\n    data.check = false;\n    data.empowerText = 'EmpowerAlert.btn2';\n    window.$message.error(error);\n  }\n};\nconst setColorFn = async () => {\n  if (data.check) {\n    return;\n  }\n  data.check = true;\n  try {\n    const res = await common_store.allMethods\n      .setPixelColor(data.info.canvasid, data.info.index, activeColorId.value)\n      .send({ from: common_store.address });\n    data.info.color = activeColorId.value;\n    data.finish = true;\n    data.success = true;\n    data.check = false;\n    data.hash = res.transactionHash;\n    common_store.addHash(data.hash, 4);\n    // Toast(t('NFT.moditySuccess'));\n  } catch (error) {\n    data.finish = true;\n    data.success = false;\n    data.check = false;\n    data.hash = error.message;\n  }\n};\nconst submit = () => {\n  data.type == 'sell' ? sell() : setColorFn();\n};\nwatchEffect(() => {\n  if (data.info.endDate) {\n    inTime.value = +data.info.endDate * 1000 + 3 * 60000 > new Date().getTime();\n  } else {\n    inTime.value = false;\n  }\n});\n</script>\n<template>\n  <div class=\"nft-details cen\">\n    <div class=\"allFlex\">\n      <div class=\"info-img\">\n        <img :src=\"getUrl(data.info.tokenid)\" alt=\"\" class=\"\" />\n      </div>\n      <ul class=\"info-data allFlex column\">\n        <li class=\"Wcolor font-Two font500\">{{ $t('titleText') }}</li>\n        <li class=\"mainColor font-Tt Bold details_title\">\n          {{ $t('name') }}#{{ data.info.tokenid }}\n        </li>\n        <li>\n          <span class=\"priceColor font-Two\">{{ $t('NFT.counts') }} </span>\n          <span class=\"font-Two Wcolor\">\n            {{ data.times > 0 ? data.times - 1 : 0 }}</span\n          >\n        </li>\n        <li class=\"bg info-change bg-top\">\n          <pixel-info\n            :price=\"price\"\n            :colorId=\"data.info.color\"\n            :x=\"data.x\"\n            :y=\"data.y\"\n            type=\"nft\"\n          ></pixel-info>\n        </li>\n        <li class=\"bg info-change\">\n          <change-color @setColor=\"setColor\"></change-color>\n        </li>\n        <li class=\"titleBg info-btn\">\n          <n-button\n            type=\"default\"\n            block\n            @click=\"empowerFn\"\n            v-if=\"!data.empower && data.times < 9\"\n            :disabled=\"data.check\"\n            class=\"empower-btn\"\n            >{{\n              data.check ? $t('EmpowerAlert.btn1') : $t('EmpowerAlert.btn2')\n            }}</n-button\n          >\n          <count-down\n            :endDate=\"data.info.endDate\"\n            @close=\"inTime = false\"\n            v-if=\"inTime && data.times < 9\"\n            class=\"font-Seven countdown\"\n          ></count-down>\n          <n-button\n            type=\"primary\"\n            block\n            v-else\n            :disabled=\"+data.times >= 9 || data.info.type_ == '2'\"\n            @click=\"toSell\"\n            >{{\n              +data.times >= 9 || data.info.type_ == '2'\n                ? $t('NFT.notSell')\n                : $t('NFT.sell')\n            }}</n-button\n          >\n        </li>\n      </ul>\n    </div>\n    <n-modal v-model:show=\"data.alertShow\">\n      <swap-alert\n        :finish=\"data.finish\"\n        :success=\"data.success\"\n        :hash=\"data.hash\"\n        @closeFn=\"closeFn\"\n        :title=\"data.type == 'sell' ? 'SwapAlert.title6' : 'SwapAlert.title4'\"\n        :text=\"\n          data.type == 'sell' ? 'SwapAlert.success3' : 'SwapAlert.success4'\n        \"\n        :btn=\"data.type == 'sell' ? 'NFT.sell' : 'NFT.modity'\"\n        :empower=\"data.empower\"\n        :empowerText=\"data.empowerText\"\n        @empowerFn=\"empowerFn\"\n        :check=\"data.check\"\n        @submit=\"submit\"\n      >\n        <p class=\"font-Four\">\n          {{\n            data.type == 'sell'\n              ? $t('NFT.type1', {\n                  start: common_store.address.slice(0, 6),\n                  end: common_store.address.slice(-4),\n                  tokenId: data.info.tokenid,\n                })\n              : $t('NFT.type3', {\n                  start: common_store.address.slice(0, 6),\n                  end: common_store.address.slice(-4),\n                  tokenId: data.info.tokenid,\n                })\n          }}\n        </p>\n      </swap-alert>\n    </n-modal>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n.nft-details {\n  padding: 25px 0;\n}\n.info-img {\n  width: 52%;\n  border-radius: 10px;\n  font-size: 0;\n  overflow: hidden;\n  img {\n    width: 100%;\n  }\n}\n.info-data {\n  width: 45%;\n  height: 100%;\n}\n.details_title {\n  height: 60px;\n  line-height: 60px;\n}\n.details_text {\n  height: 22px;\n  line-height: 22px;\n  margin-top: 20px;\n}\n.info-change {\n  padding: 10px 30px;\n}\n.info-btn {\n  padding: 20px 100px;\n}\n.bg-top {\n  margin-top: 15px;\n}\n.empower-btn {\n  margin-bottom: 15px;\n}\n</style>\n","import script from \"./details.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./details.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./details.vue?vue&type=style&index=0&id=226d7d56&lang=scss&scoped=true\"\n\nimport exportComponent from \"/Users/zhuweiyun/Desktop/zwy/vue3-pc-天空之城/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-226d7d56\"]])\n\nexport default __exports__"],"names":["canvasStore","defineStore","state","selectPixelList","activeColorId","selectColorList","selectColorId","page","actions","changePage","this","selectColorItem","index","splice","slice","clearColor","selectColor","colorId","pixelExists","params","findIndex","pixel","newPixel","boxId","addSelectPixel","removeSelectPixel","selectPixel","push","arr","filter","length","colorIndex","color","__exports__","colorSelect","pixelSize","toRefs","props","left","computed","value","x","top","y","canvasBg","require","store","type","size","data","reactive","colorKonva","width","height","colorHover","colorClick","colorArr","createBox","len","Math","sqrt","hexPalette","a","floor","Box","id","boxEvent","event","target","attrs","console","log","mousemove","onBeforeMount","hash","toClipboard","commonStore","useClipboard","canvas_store","show","common_store","router","useRouter","route","useRoute","t","useI18n","info","query","alertShow","finish","success","times","check","empower","empowerText","ref","inTime","price","priceArr","setColor","async","window","$message","warning","getTimes","tokenid","getEmpower","getXY","res","allMethods","getApproved","call","market_address","toSell","error","marketMethods","nftTradeCount","tokenId","sell","sellRes","send","from","address","transactionHash","addHash","message","closeFn","setTimeout","go","empowerFn","approve","setColorFn","setPixelColor","canvasid","submit","watchEffect","endDate","Date","getTime"],"sourceRoot":""}